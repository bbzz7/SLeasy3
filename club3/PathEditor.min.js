/*!
 * VERSION: 0.1.0
 * DATE: 2018-05-04
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2018, GreenSock. All rights reserved.
 * This work is only for use by Club GreenSock members ("Shockingly Green" or higher) and is
 * subject to the software agreement that was issued with the membership. See https://greensock.com/club/
 *
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(t){"use strict";var e,i,s,n,h,a,r,o=_gsScope.GreenSockGlobals||_gsScope,l=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,c=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,d=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,_=document,g="#4e7fff",u=Math.PI/180,f=Date.now||function(){return(new Date).getTime()},p=0,v=0,m={},b=[],A={},S=[],C=",",M="PathEditor",y=String.fromCharCode(103,114,101,101,110,115,111,99,107,46,99,111,109),E=String.fromCharCode(47,114,101,113,117,105,114,101,115,45,109,101,109,98,101,114,115,104,105,112,47),k=function(e){return !0}(t?t.location.host:""),D=function(t,e,i){var s,n=_.createElementNS("http://www.w3.org/2000/svg",t),h=/([a-z])([A-Z])/g;for(s in i)n.setAttributeNS(null,s.replace(h,"$1-$2").toLowerCase(),i[s]);return e.appendChild(n),n},P=function(t){return(1e3*t|0)/1e3},x=(r="div",_.createElementNS?_.createElementNS("http://www.w3.org/1999/xhtml",r):_.createElement(r)),H=!1,w=function(t){for(var e=t.split(","),i=(void 0!==x.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==x.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),s={},n=4;--n>-1;)s[e[n]]=i[n],s[i[n]]=e[n];return s}("touchstart,touchmove,touchend,touchcancel"),R=function(t,e,i,s){if(t.addEventListener){var n=w[e];s=s||{passive:!1},t.addEventListener(n||e,i,s),n&&e!==n&&t.addEventListener(e,i,s)}else t.attachEvent&&t.attachEvent("on"+e,i)},X=function(t,e,i){t.removeEventListener?(t.removeEventListener(w[e],i),e!==w[e]&&t.removeEventListener(e,i)):t.detachEvent&&t.detachEvent("on"+e,i)},q=function(t){H=t.touches&&_dragCount<t.touches.length,X(t.target,"touchend",q)},T=function(t){H=t.touches&&_dragCount<t.touches.length,R(t.target,"touchend",q)},I=function(e){t.console&&console.log(e)},N=function(t,e,i,s,n,h,a,r,o){if(t!==r||e!==o){i=Math.abs(i),s=Math.abs(s);var l=n%360*u,c=Math.cos(l),d=Math.sin(l),_=(t-r)/2,g=(e-o)/2,f=c*_+d*g,p=-d*_+c*g,v=i*i,m=s*s,b=f*f,A=p*p,S=b/v+A/m;S>1&&(v=(i=Math.sqrt(S)*i)*i,m=(s=Math.sqrt(S)*s)*s);var C=h===a?-1:1,M=(v*m-v*A-m*b)/(v*A+m*b);M<0&&(M=0);var y=C*Math.sqrt(M),E=y*(i*p/s),k=y*(-s*f/i),D=(t+r)/2+(c*E-d*k),P=(e+o)/2+(d*E+c*k),x=(f-E)/i,H=(p-k)/s,w=(-f-E)/i,R=(-p-k)/s,X=Math.sqrt(x*x+H*H),q=x,T=(C=H<0?-1:1)*Math.acos(q/X)*_RAD2DEG;X=Math.sqrt((x*x+H*H)*(w*w+R*R)),q=x*w+H*R;var I=(C=x*R-H*w<0?-1:1)*Math.acos(q/X)*_RAD2DEG;!a&&I>0?I-=360:a&&I<0&&(I+=360);var N,L,z,G=function(t,e){var i,s,n,h,a,r,o=Math.ceil(Math.abs(e)/90),l=0,c=[];for(t*=u,i=(e*=u)/o,s=4/3*Math.sin(i/2)/(1+Math.cos(i/2)),r=0;r<o;r++)n=t+r*i,h=Math.cos(n),a=Math.sin(n),c[l++]=h-s*a,c[l++]=a+s*h,n+=i,h=Math.cos(n),a=Math.sin(n),c[l++]=h+s*a,c[l++]=a-s*h,c[l++]=h,c[l++]=a;return c}(T%=360,I%=360),Y=c*i,V=d*i,O=d*-s,F=c*s,W=G.length-2;for(N=0;N<W;N+=2)L=G[N],z=G[N+1],G[N]=L*Y+z*O+D,G[N+1]=L*V+z*F+P;return G[G.length-2]=r,G[G.length-1]=o,G}},L=function(t){var e,i,s,n,h,a,r,o,c,_,g,u,f,p=(t+"").replace(d,function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e}).match(l)||[],v=[],m=0,b=0,A=p.length,S=2,C=0;if(!t||!isNaN(p[0])||isNaN(p[1]))return I("ERROR: malformed path data: "+t),v;for(e=0;e<A;e++)if(f=h,isNaN(p[e])?a=(h=p[e].toUpperCase())!==p[e]:e--,s=+p[e+1],n=+p[e+2],a&&(s+=m,n+=b),0===e&&(o=s,c=n),"M"===h)r&&r.length<8&&(v.length-=1,S=0),m=o=s,b=c=n,r=[s,n],C+=S,S=2,v.push(r),e+=2,h="L";else if("C"===h)r||(r=[0,0]),r[S++]=s,r[S++]=n,a||(m=b=0),r[S++]=m+1*p[e+3],r[S++]=b+1*p[e+4],r[S++]=m+=1*p[e+5],r[S++]=b+=1*p[e+6],e+=6;else if("S"===h)"C"===f||"S"===f?(_=m-r[S-4],g=b-r[S-3],r[S++]=m+_,r[S++]=b+g):(r[S++]=m,r[S++]=b),r[S++]=s,r[S++]=n,a||(m=b=0),r[S++]=m+=1*p[e+3],r[S++]=b+=1*p[e+4],e+=4;else if("Q"===h)_=s-m,g=n-b,r[S++]=m+2*_/3,r[S++]=b+2*g/3,a||(m=b=0),_=s-(m+=1*p[e+3]),g=n-(b+=1*p[e+4]),r[S++]=m+2*_/3,r[S++]=b+2*g/3,r[S++]=m,r[S++]=b,e+=4;else if("T"===h)_=m-r[S-4],g=b-r[S-3],r[S++]=m+_,r[S++]=b+g,_=m+1.5*_-s,g=b+1.5*g-n,r[S++]=s+2*_/3,r[S++]=n+2*g/3,r[S++]=m=s,r[S++]=b=n,e+=2;else if("H"===h)n=b,r[S++]=m+(s-m)/3,r[S++]=b+(n-b)/3,r[S++]=m+2*(s-m)/3,r[S++]=b+2*(n-b)/3,r[S++]=m=s,r[S++]=n,e+=1;else if("V"===h)n=s,s=m,a&&(n+=b-m),r[S++]=s,r[S++]=b+(n-b)/3,r[S++]=s,r[S++]=b+2*(n-b)/3,r[S++]=s,r[S++]=b=n,e+=1;else if("L"===h||"Z"===h)"Z"===h&&(s=o,n=c,r.closed=!0),("L"===h||Math.abs(m-s)>.5||Math.abs(b-n)>.5)&&(r[S++]=m+(s-m)/3,r[S++]=b+(n-b)/3,r[S++]=m+2*(s-m)/3,r[S++]=b+2*(n-b)/3,r[S++]=s,r[S++]=n,"L"===h&&(e+=2)),m=s,b=n;else if("A"===h){if(u=N(m,b,1*p[e+1],1*p[e+2],1*p[e+3],1*p[e+4],1*p[e+5],(a?m:0)+1*p[e+6],(a?b:0)+1*p[e+7])){for(i=0;i<u.length;i++)r[S++]=u[i];m=r[S-2],b=r[S-1]}e+=7}else I("Error: malformed path data: "+t);return v.totalPoints=C+S,v},z=function(t,e,i,s,n,h,a,r,o,l,c){var d,_=(t+i)/2,g=(e+s)/2,u=(i+n)/2,f=(s+h)/2,p=(n+a)/2,v=(h+r)/2,m=(_+u)/2,b=(g+f)/2,A=(u+p)/2,S=(f+v)/2,C=(m+A)/2,M=(b+S)/2,y=a-t,E=r-e,k=Math.abs((i-a)*E-(s-r)*y),D=Math.abs((n-a)*E-(h-r)*y);return l||(l=[t,e,a,r],c=2),l.splice(c||l.length-2,0,C,M),(k+D)*(k+D)>o*(y*y+E*E)&&(d=l.length,z(t,e,_,g,m,b,C,M,o,l,c),z(C,M,A,S,p,v,a,r,o,l,c+2+(l.length-d))),l},G=function(t,e,i,s){var n,h,a,r,o,l,c,d,_,g,u,f,p,v,m=(t=V(t,e)).length-2,b=+t[0],A=+t[1],S=+t[2],C=+t[3],M=[b,A,b,A],y=S-b,E=C-A,k=1e3;for(isNaN(i)&&(i=Math.PI/10),s=s||0===s?.4*+s:.4,o=2;o<m;o+=2)n=b,h=A,b=S,A=C,f=(l=y)*l+(d=E)*d,p=(y=(S=+t[o+2])-b)*y+(E=(C=+t[o+3])-A)*E,v=(c=S-n)*c+(_=C-h)*_,u=(a=Math.acos((f+p-v)/Math.sqrt(4*f*p)))/Math.PI*s,g=Math.sqrt(f)*u,u*=Math.sqrt(p),a>i?(r=Math.atan2(_,c),M.push(((b-Math.cos(r)*g)*k|0)/k,((A-Math.sin(r)*g)*k|0)/k,(b*k|0)/k,(A*k|0)/k,((b+Math.cos(r)*u)*k|0)/k,((A+Math.sin(r)*u)*k|0)/k)):(r=Math.atan2(d,l),M.push(((b-Math.cos(r)*g)*k|0)/k,((A-Math.sin(r)*g)*k|0)/k),r=Math.atan2(E,y),M.push((b*k|0)/k,(A*k|0)/k,((b+Math.cos(r)*u)*k|0)/k,((A+Math.sin(r)*u)*k|0)/k));return M.push(P(S),P(C),P(S),P(C)),M},Y=function(t,e,i,s,n){var h,a,r,o,l,c,d,_,g,u,f,p,v=s,m=t[e],b=t[e+1],A=t[i],S=t[i+1];for(a=e+2;a<i;a+=2)o=t[a],l=t[a+1],u=void 0,f=void 0,p=void 0,p=(g=S)-(d=b),((f=(_=A)-(c=m))||p)&&((u=((o-c)*f+(l-d)*p)/(f*f+p*p))>1?(c=_,d=g):u>0&&(c+=f*u,d+=p*u)),(r=(f=o-c)*f+(p=l-d)*p)>v&&(h=a,v=r);v>s&&(h-e>2&&Y(t,e,h,s,n),n.push(t[h],t[h+1]),i-h>2&&Y(t,h,i,s,n))},V=function(t,e){var i,s,n,h,a,r,o,l=parseFloat(t[0]),c=parseFloat(t[1]),d=[l,c],_=t.length-2;for(e=e||1,e*=e,i=2;i<_;i+=2)(h=l-(s=parseFloat(t[i])))*h+(a=c-(n=parseFloat(t[i+1])))*a>e&&(d.push(s,n),l=s,c=n);return d.push(parseFloat(t[_]),parseFloat(t[_+1])),o=d.length-2,r=[d[0],d[1]],Y(d,0,o,e,r),r.push(d[o],d[o+1]),r},O=function(t,e,i,s,n,h,r,o,l,c,d,_,g,u){var f,p,v,m,b=(n-s)/h,A=0,S=s;for(a=9999800001;S<=n;)(f=(p=(m=1-S)*m*m*r+3*m*m*S*l+3*m*S*S*d+S*S*S*g-e)*p+(v=m*m*m*o+3*m*m*S*c+3*m*S*S*_+S*S*S*u-i)*v)<a&&(a=f,A=S),S+=b;return t>1?O(t-1,e,i,Math.max(A-b,0),Math.min(A+b,1),h,r,o,l,c,d,_,g,u):A},F=function(t,e){return function(i){t.call(e,i)}};SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())};var W=function(t){var e,i,s=this,n=s.target.parentNode.getScreenCTM();this._matrix=this.target.transform.baseVal.getItem(0).matrix,this._ctm=n.inverse(),w[t.type]?(e=-1!==t.type.indexOf("touch")?t.currentTarget||t.target:_,R(e,"touchend",s._onRelease),R(e,"touchmove",s._onMove),R(e,"touchcancel",s._onRelease),R(_,"touchstart",T)):(e=null,R(_,"mousemove",s._onMove)),R(_,"mouseup",s._onRelease),t.preventDefault(),t.preventManipulation&&t.preventManipulation(),t.changedTouches?(t=s.touch=t.changedTouches[0],s.touchID=t.identifier):t.pointerId?s.touchID=t.pointerId:s.touch=s.touchID=null,s._startPointerY=s.pointerY=t.pageY,s._startPointerX=s.pointerX=t.pageX,s._startElementX=s._matrix.e,s._startElementY=s._matrix.f,1===this._ctm.a&&0===this._ctm.b&&0===this._ctm.c&&1===this._ctm.d?this._ctm=null:(i=s._startPointerX*this._ctm.a+s._startPointerY*this._ctm.c+this._ctm.e,s._startPointerY=s._startPointerX*this._ctm.b+s._startPointerY*this._ctm.d+this._ctm.f,s._startPointerX=i),s.isPressed=v=!0,s.touchEventTarget=e,s.vars.onPress&&s.vars.onPress.call(s.vars.callbackScope||s,s.pointerEvent)},j=function(t){var e,i,s=this,n=t;if(s._enabled&&!H&&s.isPressed&&t){if(s.pointerEvent=t,e=t.changedTouches){if((t=e[0])!==s.touch&&t.identifier!==s.touchID){for(i=e.length;--i>-1&&(t=e[i]).identifier!==s.touchID;);if(i<0)return}}else if(t.pointerId&&s.touchID&&t.pointerId!==s.touchID)return;n.preventDefault(),n.preventManipulation&&n.preventManipulation(),s.setPointerPosition(t.pageX,t.pageY),s.vars.onDrag&&s.vars.onDrag.call(s.vars.callbackScope||s,s.pointerEvent)}},U=function(t,e){var i=this;if(i._enabled&&i.isPressed&&(!t||null==i.touchID||e||!(t.pointerId&&t.pointerId!==i.touchID||t.changedTouches&&!function(t,e){for(var i=t.length;--i>-1;)if(t[i].identifier===e)return!0;return!1}(t.changedTouches,i.touchID)))){p=f(),i.isPressed=v=!1;var s,n,h=t,a=i.isDragging,r=i.touchEventTarget;if(r?(X(r,"touchend",i._onRelease),X(r,"touchmove",i._onMove),X(r,"touchcancel",i._onRelease),X(_,"touchstart",T)):X(_,"mousemove",i._onMove),X(_,"mouseup",i._onRelease),t&&t.target&&X(t.target,"mouseup",i._onRelease),a?i.isDragging=!1:i.vars.onClick&&i.vars.onClick.call(i.vars.callbackScope||i,h),t){if((s=t.changedTouches)&&(t=s[0])!==i.touch&&t.identifier!==i.touchID){for(n=s.length;--n>-1&&(t=s[n]).identifier!==i.touchID;);if(n<0)return}i.pointerEvent=h,i.pointerX=t.pageX,i.pointerY=t.pageY}return h&&!a&&i.vars.onDragRelease?i.vars.onDragRelease.call(i,i.pointerEvent):(h&&(h.preventDefault(),h.preventManipulation&&h.preventManipulation()),i.vars.onRelease&&i.vars.onRelease.call(i.vars.callbackScope||i,i.pointerEvent)),a&&i.vars.onDragEnd&&i.vars.onDragEnd.call(i.vars.callbackScope||i,i.pointerEvent),!0}},Z=function(t,e){this.target="string"==typeof t?_.querySelectorAll(t)[0]:t,this.vars=e||{},this._onPress=F(W,this),this._onMove=F(j,this),this._onRelease=F(U,this),this.target.setAttribute("transform",(this.target.getAttribute("transform")||"")+" translate(0,0)"),this._matrix=this.target.transform.baseVal.getItem(0).matrix,this.x=this._matrix.e,this.y=this._matrix.f,this.snap=e.snap,isNaN(e.maxX)&&isNaN(e.minX)?this._bounds=0:(this._bounds=1,this.maxX=+e.maxX,this.minX=+e.minX),this.enabled(!0)},$=Z.prototype;$.setPointerPosition=function(t,e){var i,n,h,a,r;this.pointerX=t,this.pointerY=e,this._ctm&&(r=t*this._ctm.a+e*this._ctm.c+this._ctm.e,e=t*this._ctm.b+e*this._ctm.d+this._ctm.f,t=r),(n=e-this._startPointerY)<1&&n>-1&&(n=0),(i=t-this._startPointerX)<1&&i>-1&&(i=0),h=Math.round(this._startElementX+i),a=Math.round(this._startElementY+n),this.snap&&!s&&(A.x=h,A.y=a,this.snap.call(this,A),h=A.x,a=A.y),this.x===h&&this.y===a||(this._matrix.f=this.y=a,this._matrix.e=this.x=h,!this.isDragging&&this.isPressed&&(this.isDragging=!0,this.vars.onDragStart&&this.vars.onDragStart.call(this.vars.callbackScope||this,this.pointerEvent)))},$.enabled=function(t){return arguments.length?(this._enabled=t,t?(R(this.target,"mousedown",this._onPress),R(this.target,"touchstart",this._onPress),R(this.target,"click",this._onClick,!0)):(e=this.isDragging,X(this.target,"mousedown",this._onPress),X(this.target,"touchstart",this._onPress),X(this.target,"click",this._onClick),this.touchEventTarget&&(X(this.touchEventTarget,"touchcancel",this._onRelease),X(this.touchEventTarget,"touchend",this._onRelease),X(this.touchEventTarget,"touchmove",this._onMove)),X(_,"mouseup",this._onRelease),X(_,"mousemove",this._onMove),this.isDragging=this.isPressed=!1,e&&this.vars.onDragEnd&&this.vars.onDragEnd.call(this.vars.callbackScope||this,this.pointerEvent)),this):this._enabled;var e},$.endDrag=function(t){this._onRelease(t)};var B=function(t,e,i,s){this.smooth=e&&e<i.length-2&&Math.abs((i[e+1]-i[e-1])/(i[e]-i[e-2])-(i[e+3]-i[e+1])/(i[e+2]-i[e]))<.05?2:0,this.element=D("path",t._selection,{d:this.smooth?t._circleHandle:t._squareHandle,transform:"translate("+i[e]+","+i[e+1]+")",fill:g,stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this.element._gsSelection=!0,this.i=e,this.segment=i,this.vars=s||{},this._draggable=new Z(this.element,{callbackScope:this,onDrag:this.onDrag,snap:this.vars.snap,onPress:this.onPress,onRelease:this.onRelease,onClick:this.onClick,onDragEnd:this.onDragEnd})},Q=function(t,e,i){var s,n=t.length,h=[];for(s=0;s<n;s+=6)h.push(new B(e,s,t,i));return h},J=function(t,e,i){var s=t[i]-t[e],n=t[i+1]-t[e+1];return Math.sqrt(s*s+n*n)};($=B.prototype).onPress=function(){this.vars.onPress.call(this.vars.callbackScope||this,this)},$.onClick=function(){this.vars.onClick.call(this.vars.callbackScope||this,this)},$.onDrag=function(){var t=this.segment;this.vars.onDrag.call(this.vars.callbackScope||this,this,this._draggable.x-t[this.i],this._draggable.y-t[this.i+1])},$.onDragEnd=function(){this.vars.onDragEnd.call(this.vars.callbackScope||this,this)},$.onRelease=function(){this.vars.onRelease.call(this.vars.callbackScope||this,this)};var K=o.PathEditor=function(e,i){if(!k)return t.location.href="http://"+y+E+"?plugin="+M+"&source=greensock.com",!1;i=i||{},this.vars=i,this.path="string"==typeof e?_.querySelectorAll(e)[0]:e,this._selectionHittest=D("path",this.path.ownerSVGElement,{stroke:"transparent",strokeWidth:14,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selection=i._selection||D("g",this.path.ownerSVGElement),this._selectionPath=D("path",this._selection,{stroke:g,strokeWidth:2,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selectedAnchors=[],this._line1=D("polyline",this._selection,{stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line2=D("polyline",this._selection,{stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line1.style.pointerEvents=this._line2.style.pointerEvents=this._selectionPath.style.pointerEvents="none",this._enabled=!0;var s,n,h,a=this.path.parentNode.getScreenCTM().inverse(),r=(a.a+a.d)/2*(i.handleSize||4);this._squareHandle=["M-"+(s=P(s=r)),-s,s,-s,s,s,-s,s+"z"].join(C),this._circleHandle=(h=P(.552284749831*(n=r+.5)),"M"+(n=P(n))+",0C"+[n,h,h,n,0,n,-h,n,-n,h,-n,0,-n,-h,-h,-n,0,-n,h,-n,n,-h,n,0].join(C)+"z"),this._handle1=D("path",this._selection,{d:this._squareHandle,fill:g,stroke:"transparent",strokeWidth:2}),this._handle2=D("path",this._selection,{d:this._squareHandle,fill:g,stroke:"transparent",strokeWidth:2}),this._handle1._draggable=new Z(this._handle1,{onDrag:this._onDragHandle1,callbackScope:this,onPress:this._onPressHandle1,onRelease:this._onReleaseHandle,onClick:this._onClickHandle1,snap:i.handleSnap}),this._handle2._draggable=new Z(this._handle2,{onDrag:this._onDragHandle2,callbackScope:this,onPress:this._onPressHandle2,onRelease:this._onReleaseHandle,onClick:this._onClickHandle2,snap:i.handleSnap}),this._handle1.style.visibility=this._handle2.style.visibility="hidden";for(var o=[this._handle1,this._handle2,this._line1,this._line2,this._selection,this._selectionPath,this._selectionHittest],l=o.length;--l>-1;)o[l]._gsSelection=!0;if(!1!==i.draggable&&(this._draggable=new Z(this._selectionHittest,{callbackScope:this,onPress:this.select,onRelease:this._onRelease,onDrag:this._onDragPath,onDragEnd:this._saveState,maxX:this.vars.maxX,minX:this.vars.minX})),!k)return!1;this.init(),this._selection.style.visibility=!1===i.selected?"hidden":"visible",!1!==i.selected&&tt.push(this),this._saveState(),R(this._selectionHittest,"mousedown",F(this._onClickSelectionPath,this)),R(this._selectionHittest,"touchstart",F(this._onClickSelectionPath,this)),R(this._selectionHittest,"mouseup",F(this._onRelease,this)),R(this._selectionHittest,"touchend",F(this._onRelease,this))},tt=[];($=K.prototype)._onRelease=function(t){var e=this._editingAnchor;e&&(m.x=e.segment[e.i],m.y=e.segment[e.i+1]),this.vars.onRelease&&this.vars.onRelease.call(this,t)},$.init=function(){var t,e,i=this.path.getAttribute("d"),s={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX};if(this._anchors&&this._anchors.length){for(e=0;e<this._anchors.length;e++)this._anchors[e].element.parentNode.removeChild(this._anchors[e].element),this._anchors[e]._draggable.enabled(!1);this._selectedAnchors.length=0}if(this._bezier=L(i),this._anchors=Q(this._bezier[0]||[],this,s),(t=this._bezier.length)>1)for(e=1;e<t;e++)this._anchors=this._anchors.concat(Q(this._bezier[e],this,s));this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),this._selectedAnchors.length=0,this._selectionPath.setAttribute("d",i),this._selectionHittest.setAttribute("d",i),this._selection.setAttribute("transform",this.path.getAttribute("transform")||"translate(0,0)"),this._selectionHittest.setAttribute("transform",this._selection.getAttribute("transform")),this._updateAnchors()},$._saveState=function(){!function(t){var e,i=[],s=t._selectedAnchors;for(e=0;e<s.length;e++)i[e]=s[e].i;b.unshift({path:t,d:t.path.getAttribute("d"),transform:t.path.getAttribute("transform")||"",selectedIndexes:i}),b.length>30&&(b.length=30)}(this)},$._onClickSelectionPath=function(t){if("hidden"===this._selection.style.visibility)this.select();else if(i){var e,s,n,r,o,l={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX},c=this._bezier[0],d=this._selection.getScreenCTM().inverse();for(this._draggable&&this._draggable._onRelease(t),d&&(r=t.clientX*d.a+t.clientY*d.c+d.e,o=t.clientX*d.b+t.clientY*d.d+d.f),e=function(t,e,i,s,n){s=s||20,n=n||3;var h,r,o,l,c,d,_,g,u,f,p,v,m,b,A,S,C,M,y=i.length,E=9999800001,k=0,D=0;for(r=0;r<y;r+=6)h=O(1,t,e,0,1,s,i[r],i[r+1],i[r+2],i[r+3],i[r+4],i[r+5],i[r+6],i[r+7]),E>a&&(E=a,k=h,D=r);return h=O(n,t,e,k-.05,k+.05,s,i[D],i[D+1],i[D+2],i[D+3],i[D+4],i[D+5],i[D+6],i[D+7]),c=h,M=1e3,d=(o=i)[l=D],_=o[l+1],g=o[l+2],u=o[l+3],f=o[l+4],p=o[l+5],b=d+(g-d)*c,b+=((S=g+(f-g)*c)-b)*c,S+=(f+((v=o[l+6])-f)*c-S)*c,A=_+(u-_)*c,A+=((C=u+(p-u)*c)-A)*c,C+=(p+((m=o[l+7])-p)*c-C)*c,o.splice(l+2,4,((d+(g-d)*c)*M|0)/M,((_+(u-_)*c)*M|0)/M,(b*M|0)/M,(A*M|0)/M,((b+(S-b)*c)*M|0)/M,((A+(C-A)*c)*M|0)/M,(S*M|0)/M,(C*M|0)/M,((f+(v-f)*c)*M|0)/M,((p+(m-p)*c)*M|0)/M),D+6}(r,o,c),s=0;s<this._anchors.length;s++)this._anchors[s].i>=e&&(this._anchors[s].i+=6);n=new B(this,e,c,l),this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),n._draggable._onPress(t),h=n,this._anchors.push(n),this._selectedAnchors.length=0,this._selectedAnchors.push(n),this._updateAnchors(),this.update(),this._saveState()}},$._onClickHandle1=function(){var t=this._editingAnchor,e=t.i,s=t.segment;i&&Math.abs(s[e]-s[e-2])<5&&Math.abs(s[e+1]-s[e-1])<5&&this._onClickAnchor(t)},$._onClickHandle2=function(){var t=this._editingAnchor,e=t.i,s=t.segment;i&&Math.abs(s[e]-s[e+2])<5&&Math.abs(s[e+1]-s[e+3])<5&&this._onClickAnchor(t)},$._onDragEndAnchor=function(t){h=null,this._saveState()},$.isSelected=function(){return this._selectedAnchors.length>0},$.select=function(t){if(this._selection.style.visibility="visible",this._editingAnchor=null,this.path._gsSelection=!0,!0===t)for(var e=this._anchors.length;--e>-1;)this._selectedAnchors[e]=this._anchors[e];-1===tt.indexOf(this)&&tt.push(this),this._updateAnchors()},$.deselect=function(){this._selection.style.visibility="hidden",this._selectedAnchors.length=0,this._editingAnchor=null,this.path._gsSelection=!1,tt.splice(tt.indexOf(this),1),this._updateAnchors()},$._onDragPath=function(t){var e=this._selectionHittest.getAttribute("transform")||"translate(0,0)";this._selection.setAttribute("transform",e),this.path.setAttribute("transform",e)},$._onPressAnchor=function(t){-1===this._selectedAnchors.indexOf(t)?(s||(this._selectedAnchors.length=0),this._selectedAnchors.push(t)):s&&(this._selectedAnchors.splice(this._selectedAnchors.indexOf(t),1),t._draggable.endDrag()),m.x=t.segment[t.i],m.y=t.segment[t.i+1],this._updateAnchors()},$._deleteSelectedAnchors=function(){for(var t,e,i,s=this._selectedAnchors,n=s.length;--n>-1;)for((t=s[n]).element.parentNode.removeChild(t.element),t._draggable.enabled(!1),(e=t.i)?e<t.segment.length-2?t.segment.splice(e-2,6):t.segment.splice(e-4,6):t.segment.splice(e,6),s.splice(n,1),this._anchors.splice(this._anchors.indexOf(t),1),i=0;i<this._anchors.length;i++)this._anchors[i].i>=e&&(this._anchors[i].i-=6);this._updateAnchors(),this.update(),this._saveState()},$._onClickAnchor=function(t){var e,n,a,r,o,l,c=t.i,d=t.segment,_=1e3;i&&h!==t&&this._editingAnchor?(t.smooth=!t.smooth,t.element.setAttribute("d",t.smooth?this._circleHandle:this._squareHandle),t.smooth&&c&&c<d.length-2?(e=((e=Math.atan2(d[c+1]-d[c-1],d[c]-d[c-2]))+(n=Math.atan2(d[c+3]-d[c+1],d[c+2]-d[c])))/2,a=J(d,c-2,c),r=J(d,c,c+2),a<.2&&(a=J(d,c,c-6)/4,e=n||Math.atan2(d[c+7]-d[c-5],d[c+6]-d[c-6])),r<.2&&(r=J(d,c,c+6)/4,n=e||Math.atan2(d[c+7]-d[c-5],d[c+6]-d[c-6])),o=Math.sin(e),l=Math.cos(e),Math.abs(n-e)<Math.PI/2&&(o=-o,l=-l),d[c-2]=((d[c]+l*a)*_|0)/_,d[c-1]=((d[c+1]+o*a)*_|0)/_,d[c+2]=((d[c]-l*r)*_|0)/_,d[c+3]=((d[c+1]-o*r)*_|0)/_,this._updateAnchors(),this.update(),this._saveState()):t.smooth||(c&&(d[c-2]=d[c],d[c-1]=d[c+1]),c<d.length-2&&(d[c+2]=d[c],d[c+3]=d[c+1]),this._updateAnchors(),this.update(),this._saveState())):s||(this._selectedAnchors.length=0,this._selectedAnchors.push(t)),h=null,this._updateAnchors()},$._updateAnchors=function(){var t,e,s,n=1===this._selectedAnchors.length?this._selectedAnchors[0]:null,h=n?n.segment:null;for(this._editingAnchor=n,t=0;t<this._anchors.length;t++)this._anchors[t].element.setAttribute("fill",-1!==this._selectedAnchors.indexOf(this._anchors[t])?g:"white");n&&(this._handle1.setAttribute("d",n.smooth?this._circleHandle:this._squareHandle),this._handle2.setAttribute("d",n.smooth?this._circleHandle:this._squareHandle)),t=n?n.i:0,n&&t?(e=h[t-2],s=h[t-1],this._handle1.style.visibility=this._line1.style.visibility=i||e!==h[t]||s!==h[t+1]?"visible":"hidden",this._handle1.setAttribute("transform","translate("+e+C+s+")"),this._line1.setAttribute("points",e+C+s+C+h[t]+C+h[t+1])):this._handle1.style.visibility=this._line1.style.visibility="hidden",n&&t<h.length-2?(e=h[t+2],s=h[t+3],this._handle2.style.visibility=this._line2.style.visibility=i||e!==h[t]||s!==h[t+1]?"visible":"hidden",this._handle2.setAttribute("transform","translate("+e+C+s+")"),this._line2.setAttribute("points",h[t]+C+h[t+1]+C+e+C+s)):this._handle2.style.visibility=this._line2.style.visibility="hidden"},$._onPressAlt=function(){var t=this._editingAnchor;t&&(t.i&&(this._handle1.style.visibility=this._line1.style.visibility="visible"),t.i<t.segment.length-2&&(this._handle2.style.visibility=this._line2.style.visibility="visible"))},$._onReleaseAlt=function(){var t,e,i=this._editingAnchor;i&&((t=i.segment)[e=i.i]===t[e-2]&&t[e+1]===t[e-1]&&(this._handle1.style.visibility=this._line1.style.visibility="hidden"),t[e]===t[e+2]&&t[e+1]===t[e+3]&&(this._handle2.style.visibility=this._line2.style.visibility="hidden"))},$._onPressHandle1=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=J(this._editingAnchor.segment,this._editingAnchor.i,this._editingAnchor.i+2))},$._onPressHandle2=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=J(this._editingAnchor.segment,this._editingAnchor.i-2,this._editingAnchor.i))},$._onReleaseHandle=function(t){this._onRelease(t),this._saveState()},$._onDragHandle1=function(){var t,e=this._editingAnchor,s=e.segment,n=e.i,h=1e3,a=this._handle1._draggable.x,r=this._handle1._draggable.y;s[n-2]=a=(a*h|0)/h,s[n-1]=r=(r*h|0)/h,e.smooth&&(i?(e.smooth=!1,e.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(t=Math.atan2(s[n+1]-r,s[n]-a),a=this._oppositeHandleLength*Math.cos(t),r=this._oppositeHandleLength*Math.sin(t),s[n+2]=((s[n]+a)*h|0)/h,s[n+3]=((s[n+1]+r)*h|0)/h)),this.update()},$._onDragHandle2=function(){var t,e=this._editingAnchor,s=e.segment,n=e.i,h=1e3,a=this._handle2._draggable.x,r=this._handle2._draggable.y;s[n+2]=a=(a*h|0)/h,s[n+3]=r=(r*h|0)/h,e.smooth&&(i?(e.smooth=!1,e.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(t=Math.atan2(s[n+1]-r,s[n]-a),a=this._oppositeHandleLength*Math.cos(t),r=this._oppositeHandleLength*Math.sin(t),s[n-2]=((s[n]+a)*h|0)/h,s[n-1]=((s[n+1]+r)*h|0)/h)),this.update()},$._onDragAnchor=function(t,e,i){var s,n,h,a,r=this._selectedAnchors,o=r.length,l=1e3;for(n=0;n<o;n++)s=(a=r[n]).i,h=a.segment,s&&(h[s-2]=((h[s-2]+e)*l|0)/l,h[s-1]=((h[s-1]+i)*l|0)/l),h[s]=((h[s]+e)*l|0)/l,h[s+1]=((h[s+1]+i)*l|0)/l,s<h.length-2&&(h[s+2]=((h[s+2]+e)*l|0)/l,h[s+3]=((h[s+3]+i)*l|0)/l),a!==t&&a.element.setAttribute("transform","translate("+h[s]+C+h[s+1]+")");this.update()},$.enabled=function(t){if(!arguments.length)return this._enabled;for(var e=this._anchors.length;--e>-1;)this._anchors[e]._draggable.enabled(t);this._enabled=t,this._handle1._draggable.enabled(t),this._handle2._draggable.enabled(t),this._draggable&&this._draggable.enabled(t),t?this._selection.parentNode||(this.path.ownerSVGElement.appendChild(this._selectionHittest),this.path.ownerSVGElement.appendChild(this._selection),this.init(),this._saveState()):(this.deselect(),this.path.ownerSVGElement.removeChild(this._selectionHittest),this.path.ownerSVGElement.removeChild(this._selection)),this._updateAnchors(),this.update()},$.update=function(){var t,e,i,s,n="",h=this._editingAnchor;for(h&&(t=h.i,e=h.segment,t&&(i=e[t-2],s=e[t-1],this._handle1.setAttribute("transform","translate("+i+C+s+")"),this._line1.setAttribute("points",i+C+s+C+e[t]+C+e[t+1])),t<e.length-2&&(i=e[t+2],s=e[t+3],this._handle2.setAttribute("transform","translate("+i+C+s+")"),this._line2.setAttribute("points",e[t]+C+e[t+1]+C+i+C+s))),t=0;t<this._bezier.length;t++)(e=this._bezier[t]).length>7&&(n+="M"+e[0]+C+e[1]+"C"+e.slice(2).join(C));this.path.setAttribute("d",n),this._selectionPath.setAttribute("d",n),this._selectionHittest.setAttribute("d",n),this.vars.onUpdate&&this._enabled&&this.vars.onUpdate.call(this,n)},$.getNormalizedSVG=function(t,e,i,s){var n,h,a,r,o,l,c=this._bezier[0],d=-1*c[0],_=0===e?0:-(e||c[1]),g=c.length,u=1/(c[g-2]+d),f=-t||c[g-1]+_;for(S.length=0,f=f?1/f:-u,u*=1e3,f*=1e3,h=0;h<g;h+=2)S[h]=((c[h]+d)*u|0)/1e3,S[h+1]=((c[h+1]+_)*f|0)/1e3;if(s){for(n=[],g=S.length,h=2;h<g;h+=6)a=S[h-2],r=S[h-1],o=S[h+4],l=S[h+5],n.push(a,r,o,l),z(a,r,S[h],S[h+1],S[h+2],S[h+3],o,l,.001,n,n.length-2);for(a=n[0],g=n.length,h=2;h<g;h+=2){if((o=n[h])<a||o>1||o<0){s();break}a=o}}return i&&8===g&&0===S[0]&&0===S[1]&&1===S[g-2]&&1===S[g-1]?S.slice(2,6).join(","):(S[2]="C"+S[2],"M"+S.join(","))};var et=function(t){if(!t.target._gsSelection&&!v&&f()-p>100){for(var e=tt.length;--e>-1;)tt[e].deselect();tt.length=0}};_.addEventListener("keydown",function(t){var h,a,r,o;if(16===t.which)s=!0;else if(17===t.which)e=!0;else if(91===t.which)n=!0;else if(18===t.which)for(i=!0,h=tt.length;--h>-1;)tt[h]._onPressAlt();else if(90===t.which&&(e||n)&&b.length>1){if(b.shift(),a=b[0]){for((o=a.path).path.setAttribute("d",a.d),o.path.setAttribute("transform",a.transform),o.init(),r=o._anchors,h=0;h<r.length;h++)-1!==a.selectedIndexes.indexOf(r[h].i)&&o._selectedAnchors.push(r[h]);o._updateAnchors(),o.update(),o.vars.onUndo&&o.vars.onUndo.call(o)}}else if(8===t.which||46===t.which)for(h=tt.length;--h>-1;)tt[h]._deleteSelectedAnchors();else if(65===t.which&&(n||e))for(h=tt.length;--h>-1;)tt[h].select(!0)}),_.addEventListener("keyup",function(t){if(16===t.which)s=!1;else if(17===t.which)e=!1;else if(91===t.which)n=!1;else if(18===t.which){i=!1;for(var h=tt.length;--h>-1;)tt[h]._onReleaseAlt()}}),R(_,"mouseup",et),R(_,"touchend",et),K.version="0.1.0",K.simplifyPoints=V,K.pointsToBezier=G,K.simplifySVG=function(t,e){var i,s,n,h,a,r,o,l,d,g,f,p;if(g=(e=e||{}).tolerance||1,d=e.precision||1/g,p=(void 0===e.cornerThreshold?18:+e.cornerThreshold)*u,!k)return!1;if("string"!=typeof t&&(t=(i=t).getAttribute("d")),"#"!==t.charAt(0)&&"."!==t.charAt(0)||(i=_.querySelector(t))&&(t=i.getAttribute("d")),s=!1!==e.curved||/[achqstvz]/gi.test(t)?L(t)[0]:t.match(c),!1!==e.curved){for(l=s,s=[],f=l.length,n=2;n<f;n+=6)h=+l[n-2],r=+l[n-1],a=+l[n+4],o=+l[n+5],s.push(P(h),P(r),P(a),P(o)),z(h,r,+l[n],+l[n+1],+l[n+2],+l[n+3],a,o,1/(2e5*d),s,s.length-2);(s=G(s,g,p,e.curviness))[2]="C"+s[2]}else s=V(s,g);return t="M"+s.join(","),i&&i.setAttribute("d",t),t},K.create=function(t,e){return new K(t,e)},K.getCubicSVGData=function(t){var e,i,s,n,h="",a=L(t),r=a.length,o=1e3;for(i=0;i<r;i++){for(h+="M"+(n=a[i])[0]+","+n[1]+" C",e=n.length,s=2;s<e;s++)h+=(n[s++]*o|0)/o+","+(n[s++]*o|0)/o+" "+(n[s++]*o|0)/o+","+(n[s++]*o|0)/o+" "+(n[s++]*o|0)/o+","+(n[s]*o|0)/o+" ";n.closed&&(h+="z")}return h},K.editingAxis=m,K.getSnapFunction=function(t){var e=t.radius||2,i=999999999999,s=t.x||0===t.x?t.x:t.width?0:-i,n=t.y||0===t.y?t.y:t.height?0:-i,h=s+(t.width||i*i),a=n+(t.height||i*i),r=!1!==t.containX,o=!1!==t.containY,l=t.axis,c=t.gridSize;return e*=e,function(t){var i,d,_,g,u=t.x,f=t.y;r&&u<s||(_=u-s)*_<e?u=s:(r&&u>h||(_=h-u)*_<e)&&(u=h),o&&f<n||(g=f-n)*g<e?f=n:(o&&f>a||(g=a-f)*g<e)&&(f=a),l&&(_=u-l.x,g=f-l.y,_*_<e&&(u=l.x),g*g<e&&(f=l.y)),c&&(_=(i=s+Math.round((u-s)/c)*c)-u)*_+(g=(d=n+Math.round((f-n)/c)*c)-f)*g<e&&(u=i,f=d),t.x=u,t.y=f}}}(_gsScope),function(t){"use strict";var e=function(){return(_gsScope.GreenSockGlobals||_gsScope).PathEditor};"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd&&define([],e)}();